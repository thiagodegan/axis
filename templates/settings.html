{% extends "base.html" %} {% block content %}
<div class="max-w-xl mx-auto space-y-4">
  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %}
  <div class="space-y-2">
    {% for category, message in messages %}
    <div
      class="rounded-lg p-3 text-sm {% if category == 'success' %}bg-green-50 text-green-700 border border-green-200{% endif %} {% if category == 'error' %}bg-red-50 text-red-700 border border-red-200{% endif %}"
    >
      {{ message }}
    </div>
    {% endfor %}
  </div>
  {% endif %} {% endwith %}

  <div class="rounded-2xl bg-white shadow p-6">
    <h2 class="text-xl font-semibold mb-4">Configurações</h2>

    <p class="text-sm mb-4">
      Token do GitHub (PAT): {% if has_token %}
      <span class="inline-flex items-center gap-2 text-green-700">
        configurado
        <span class="text-xs text-slate-500">(salvo criptografado)</span> ✅
      </span>
      {% else %}
      <span class="text-red-700">não configurado ❌</span>
      {% endif %}
    </p>

    <form
      method="post"
      action="{{ url_for('settings_post') }}"
      class="space-y-3"
    >
      <label class="block text-sm font-medium"
        >GitHub Personal Access Token</label
      >
      <input
        name="github_token"
        type="password"
        class="w-full rounded-xl border px-3 py-2 outline-none focus:ring"
        placeholder="ghp_..."
      />
      <div class="flex items-center gap-3">
        <button
          class="rounded-xl bg-slate-900 text-white px-4 py-2 hover:opacity-90"
        >
          Salvar
        </button>
        <form method="post" action="{{ url_for('settings_test') }}"></form>
      </div>
    </form>

    <form method="post" action="{{ url_for('settings_test') }}" class="mt-3">
      <button class="rounded-xl border px-4 py-2 hover:bg-slate-50">
        Testar conexão
      </button>
    </form>
  </div>
</div>
{% endblock %}
